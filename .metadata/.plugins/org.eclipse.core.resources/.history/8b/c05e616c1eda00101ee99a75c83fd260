package com.jpv.reservai.services;



import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

import com.jpv.reservai.dto.AtendenteDTO;
import com.jpv.reservai.entities.Atendente;
import com.jpv.reservai.exceptions.ObjectNotFoundException;
import com.jpv.reservai.repositories.AtendenteRepository;

@Service
public class AtendenteService {

	
	private final AtendenteRepository atendenteRepo;
	
	private final PasswordEncoder passwordEncoder;
	
	
	
	public AtendenteService(final AtendenteRepository atendenteRepository, final PasswordEncoder passwordEncoder) {
		this.atendenteRepo = atendenteRepository;
		this.passwordEncoder = passwordEncoder;
	}
	
	
	public Atendente findById(Long codigoAtendente) {
		return atendenteRepo.findById(codigoAtendente).orElseThrow(() -> new ObjectNotFoundException("Atendente n√£o encontrado!" + " ID: " + codigoAtendente));
		
	}
	
	public Atendente save(Atendente objAtendente) {
		objAtendente.setPassword(passwordEncoder.encode(objAtendente.getPassword()));
		return atendenteRepo.save(objAtendente);
	}
	
	public Atendente fromDTO(AtendenteDTO objDTO) {
		Atendente obj = new Atendente(objDTO.getCodigo(),objDTO.getNome(),objDTO.getEmail(),objDTO.getEndereco(),objDTO.getTelefone(), objDTO.getPassword());
		return obj;
	}
	
	
		
	
}
