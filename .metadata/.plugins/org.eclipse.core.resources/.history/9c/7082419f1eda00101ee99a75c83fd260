package com.jpv.reservai.services;



import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

import com.jpv.reservai.dto.FornecedorDTO;
import com.jpv.reservai.entities.Fornecedor;
import com.jpv.reservai.exceptions.ObjectNotFoundException;
import com.jpv.reservai.repositories.FornecedorRepository;

@Service
public class FornecedorService {

	
	private final FornecedorRepository fornecedorRepo;
	
	private final PasswordEncoder passwordEncoder;
	
	
	
	public FornecedorService(final FornecedorRepository fornecedorRepository, final PasswordEncoder passwordEncoder) {
		this.fornecedorRepo = fornecedorRepository;
		this.passwordEncoder = passwordEncoder;
	}
	
	
	public Fornecedor findById(Long codigoFornecedor) {
		return fornecedorRepo.findById(codigoFornecedor).orElseThrow(() -> new ObjectNotFoundException("Fornecedor n√£o encontrado!" + " ID: " + codigoFornecedor));
		
	}
	
	public Fornecedor save(Fornecedor objFornecedor) {
		objFornecedor.setPassword(passwordEncoder.encode(objFornecedor.getPassword()));
		return fornecedorRepo.save(objFornecedor);
	}
	
	public Fornecedor fromDTO(FornecedorDTO objDTO) {
		Fornecedor obj = new Fornecedor(objDTO.getCodigo(),objDTO.getNome(),objDTO.getEmail(),objDTO.getEndereco(),objDTO.getTelefone(), objDTO.getRazaoSocial(),objDTO.getPlano(),objDTO.getPassword());
		return obj;
	}
	
	
		
	
}
